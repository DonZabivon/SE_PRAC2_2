;
; Программа выводит первые 40 чисел Фибоначчи (последовательность A000045)
;
    BEGIN

    ; Положить 39 в R255
    PUSH 39
    POPR R255
L0:
    ; Печатать первые 2 числа
    PUSH 0
    OUT
    PUSH 1    
    OUT

    PUSH 0  ; N0
    PUSH 1  ; N1
L1:
    ; Начало цикла, на стеке два предыдущих числа
    POPR R0     ; Положить большее число в R0
    PUSHR R0
    
    ADD         ; Сложить два предыдущих числа
    POPR R1     ; Положить результат в R1    

    PUSHR R0    ; Положить на стек предыдущее большее число
    PUSHR R1    ; Положить на стек текущее большее число
    OUT         ; Вывести последнее число
    PUSHR R1
L2:
    ; Условие завершения (ноль в регистре R255)
    ; Вычесть 1 из R255
    PUSH 1
    PUSHR R255
    SUB

    ; Сохранить уменьшенное значение
    POPR R255    
    PUSHR R255

    ; Сравнить с нулем
    PUSH 0

    ; Перейти в начало цикла, если R255 > 0
    JB L1

    END